<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" 
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>내 손 안의 실감 라이브러리</title>

    <!-- three.js -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://unpkg.com/three@0.126.0/build/three.js"></script>
    <style>
        @font-face { 
            font-family: 'Nanum Barun Gothic'; 
            src: url(/media/fonts//NanumBarunGothic.ttf) format('truetype'); 
        }
        body::-webkit-scrollbar {
            display: none;
        }
        body {
            width      : 100vw;
            height     : 100vh;
            margin     : 0px;
        }
        html, body {
            overflow-y  : hidden;
            font-family : 'Nanum Barun Gothic', sans-serif;
        }
        .header{
            width     : 90vw;
            display   : inline-flex;
            justify-content : space-between;
            position  : fixed;
            left      : 5vw;
            bottom    : 87vh;
        }
        .model_block {
            width     : 90vw; 
            height    : 70vh; 
            position  : fixed;
            left      : 5vw;
            bottom    : 17vh;
            border    : 0px solid black;
        }
        .model_block #model_viewer{
            width     : 90vw; 
            height    : 70vh; 
            position  : absolute;
        }
        .model_block #model_viewer #ar_btn {
            position         : absolute;
            bottom           : 1vh;
            right            : 1vh;
            background-color : white;
            border-radius    : 10px; 
            border           : 1px solid black; 
            font-size        : large;
        }
        .model_block #description{
            width            : 86vw; 
            height           : 20vh; 
            position         : absolute;
            margin-top       : 0vh;
            padding          : 0px 2vw;
            background-color : #0003;
            overflow-x       : hidden;
            overflow-y       : auto;
            font-size        : x-large;
        }
        .footer_container {
            width       : 100%;
            height      : 15vh;
            position    : fixed;
            left        : 0;
            bottom      : 0;
        }
        .footer {
            width       : 100vw;
            display     : inline-block;
            overflow-x  : auto;
            overflow-y  : hidden;
            white-space : nowrap; 
        }
        .footer #thumbnail_block{
            display        : inline-block;
            margin         : 0px 5px;
        }
        .footer #thumbnail_block img { 
            display   : flex; 
            width     : 12vh; 
            height    : 12vh;
            overflow  : hidden;
            border    : 1px solid black;
        }
        .footer #thumbnail_block p { 
            margin    : 0px;
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="{% url 'index' %}"> 
            <img id="swm_bi" src="/media/assets/icon/Back.jpg" style="height:3em;"/>
        </a>
        <h1 style="margin: auto; white-space : nowrap;">
            {% if category == 'Animals' %}
                귀여운 동물들
            {% elif category == 'Natural_History' %}
                자연사
            {% elif category == 'K-Cultural_Heritage' %}
                한국 역사 문화
            {% elif category == 'World_Heritage' %}
                세계 역사 문화
            {% endif %}
        </h1>
    </div>
    
    <div class="model_block">
        <model-viewer id="model_viewer"
                      src="/media/models/Ankylosaurus/scene.gltf"
                      ios-src="/media/models/Ankylosa.footer #thumbnail_block img { 
            display   : flex; 
            width     : 12vh; 
            height    : 12vh;
            overflow  : hidden;
            border    : 1px solid black;
        }urus/Ankylosaurus.usdz"
                      alt="A 3D model"  
                      ar 
                      ar-modes="webxr scene-viewer quick-look"
                      quick-look-browsers="safari chrome"
                      camera-controls>
            <!-- <button id="ar_btn" slot="ar-button">내가있는 공간에서 보기</button> -->
        </model-viewer>

        <div id="description">
            <p id="description_title">
                <!-- <strong>
                {% if model == 'T-Rex' %}
                    티라노사우루스
                {% elif model == 'Taranrula' %}
                    타란툴라
                {% elif model == 'Sitting_Korean_Buddha_WIP' %}
                    금동좌불상
                {% elif model == 'Triceratops_skull' %}
                    트리케라톱스 머리뼈
                {% elif model == 'Moai' %}
                    모아이 석상
                {% elif model == 'Statuette_Of_A_Jackal' %}
                    오스트리아 국립 도서관 사자상
                {% endif %}
                </strong> -->
            </p>
            <p id="description_text">
                <!-- {% if model == 'T-Rex' %}
                백악기 후기(6800~6500만 년 전)에 살았던, 용반목 수각아목 티라노사우루스과의 속이다. <br>
                라이선스: CC Attribution
                {% elif model == 'Taranrula' %}
                대형열대거미과 그리고 짐승빛거미과, 테라포사과(Theraphosidae)에 속하는 거미의 총칭이다. 움직임, 온도, 냄새를 느낄 수 있도록 큰 독니, 몸을 감싸고 있는 10~80만 개의 털을 가지고 있다.<br>
                라이선스: CC Attribution
                {% elif model == 'Sitting_Korean_Buddha_WIP' %}
                고려 시대 불상으로 앉아있는 모양이며 900~1000년 정도의 시기에 제작된 것으로 추정된다.<br>
                라이선스: CC Attribution
                {% elif model == 'Triceratops_skull' %}
                세 개의 뿔이 있는 얼굴이라는 뜻의 공룡으로 약 7000만년 전, 백악기 후기 마스트리흐트절 당시 미국 캐나다 지역에 처음 나타난 초식성 각룡류 공룡의 한 속이다.<br>
                라이선스: CC Attribution
                {% elif model == 'Moai' %}
                칠레 이스터 섬에 있는 사람 얼굴 모양의 석상이다. 크기 3.5 미터, 무게 20 톤가량 되는 것이 많지만, 큰 것은 20 미터에 90 톤까지 되는 것도 있다.<br>
                라이선스: CC Attribution
                {% elif model == 'Statuette_Of_A_Jackal' %}
                체코에서 공수되어온 사암으로 만들어진 사자석상이다.
                {% endif %} -->
            </p>
        </div>
    </div>
    
    <div class="footer_container"> 
        <div class="footer">
            {% for model in list %}
            <div id="thumbnail_block" value="{{model}}"onclick="select_model(this);">
                <img src="/media/models/{{category}}/{{model}}/Thumbnail.png">
                {% if model == 'T-Rex' %}
                    티라노사우루스
                {% elif model == 'Ankylosaurus' %}
                    안킬로사우루스
                {% elif model == 'Dinosaurus' %}
                    공룡
                {% elif model == 'Tarantula' %}
                    타란툴라
                {% elif model == 'Sitting_Korean_Buddha_WIP' %}
                    금동좌불상
                {% elif model == 'Triceratops_skull' %}
                    트리케라톱스 머리뼈
                {% elif model == 'Moai' %}
                    모아이 석상
                {% elif model == 'Lion_Statue' %}
                    비엔나도서관 사자상
                {% elif model == 'Queen_From_The_Lewis_Chess_Pieces' %}
                    루이스 체스의 퀸
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    
    <script>
        function checkFileExist(urlToFile) {
            var xhr = new XMLHttpRequest();
            xhr.open('HEAD', urlToFile, false);
            xhr.send();

            if (xhr.status == "404") {
                return false;
            } else {
                return true;
            }
        }
        var select_model = function (select_obj){
            var selected_value = select_obj.getAttribute('value');
            src = '/media/models/{{category}}/'+selected_value+'/scene.gltf';
            if(!checkFileExist(src)) src = '/media/models/{{category}}/'+selected_value+'/scene.glb'
            document.getElementById('model_viewer').src = src;
            document.getElementById('model_viewer').iosSrc = '/media/models/{{category}}/'+selected_value+'/'+selected_value+'.usdz';
            
            model = selected_value;
            if(model == 'T-Rex'){
                document.getElementById('description_title').innerText = '티라노사우루스';
            } else if(model == 'Ankylosaurus'){
                document.getElementById('description_title').innerText = '안킬로사우루스';
            } else if(model == 'Tarantula'){
                document.getElementById('description_title').innerText = '타란툴라';
            } else if(model == 'Sitting_Korean_Buddha_WIP'){
                document.getElementById('description_title').innerText = '금동좌불상';
            } else if(model == 'Triceratops_skull'){
                document.getElementById('description_title').innerText = '트리케라톱스 머리뼈';
            } else if(model == 'Moai'){
                document.getElementById('description_title').innerText = '모아이 석상';
            } else if(model == 'Lion_Statue'){
                document.getElementById('description_title').innerText = '비엔나도서관 사자상';
            } else if(model == 'Queen_From_The_Lewis_Chess_Pieces'){
                document.getElementById('description_title').innerText = '루이스 체스의 퀸';
            } else {
                document.getElementById('description_title').innerText = model;
            }
            
            if(model == 'T-Rex'){
                document.getElementById('description_text').innerText = '백악기 후기(6800~6500만 년 전)에 살았던, 용반목 수각아목 티라노사우루스과의 속이다. \n라이선스: CC Attribution';
            } else if(model == 'Ankylosaurus'){
                document.getElementById('description_text').innerText = '연결된 도마뱀이라는 뜻으로, 갑옷 공룡 가운데 가장 크다. 스테고사우루스가 멸종된 후로 많이 나타났다.';
            } else if(model == 'Tarantula'){
                document.getElementById('description_text').innerText = '대형열대거미과 그리고 짐승빛거미과, 테라포사과(Theraphosidae)에 속하는 거미의 총칭이다. 움직임, 온도, 냄새를 느낄 수 있도록 큰 독니, 몸을 감싸고 있는 10~80만 개의 털을 가지고 있다.\n라이선스: CC Attribution';
            } else if(model == 'Sitting_Korean_Buddha_WIP'){
                document.getElementById('description_text').innerText = '고려 시대 불상으로 앉아있는 모양이며 900~1000년 정도의 시기에 제작된 것으로 추정된다.\n라이선스: CC Attribution';
            } else if(model == 'Triceratops_skull'){
                document.getElementById('description_text').innerText = '세 개의 뿔이 있는 얼굴이라는 뜻의 공룡으로 약 7000만년 전, 백악기 후기 마스트리흐트절 당시 미국 캐나다 지역에 처음 나타난 초식성 각룡류 공룡의 한 속이다.\n라이선스: CC Attribution';
            } else if(model == 'Moai'){
                document.getElementById('description_text').innerText = '칠레 이스터 섬에 있는 사람 얼굴 모양의 석상이다. 크기 3.5 미터, 무게 20 톤가량 되는 것이 많지만, 큰 것은 20 미터에 90 톤까지 되는 것도 있다.\n라이선스: CC Attribution';
            } else if(model == 'Lion_Statue'){
                document.getElementById('description_text').innerText = '체코에서 공수되어온 사암으로 만들어진 사자석상이다.';
            } else if(model == 'Queen_From_The_Lewis_Chess_Pieces'){
                document.getElementById('description_text').innerText = '스코트랜드 고고학 역사상 가장 귀중한 발견 중 하나로 꼽히는 루이스 체스말';
            } else {
                document.getElementById('description_text').innerText = model;
            }
        };
    </script>
</body>
</html>